language: php

# list any PHP version you want to test against
matrix:
  include:
    - php: 5.6
      env: WITH_COVERAGE=true
    - php: 7.0  

# Commands to be run before your environment runs.
install: composer install

# Try if composer cache will speed up the build
#cache:
# directories:
#    - $HOME/.composer/cache/files

# omitting "script:" will default to phpunit
script: bin/phpunit --configuration tests/phpunit.xml --coverage-clover build/logs/clover.xml

after_script:
  - if [[ "$WITH_COVERAGE" == "true" ]]; then bin/test-reporter; fi
addons:
    code_climate:
        repo_token: 5bb4e82286c8da4f0a9ddcc1586cf17eae482cdefcd2d211ad8041df79493748
