{% extends '@gems/layout.html.twig' %}

{% block content %}
    <form method="post">
        {{ csrf() }}

        {% if ask_old %}
            <div class="form-group {{ flash.hasFieldValidationErrors('old_password') ? 'has-error' }}">
                <label class="control-label" for="old_password">{{ trans('Current password') }}</label>
                <input type="password" class="form-control" name="old_password" id="old_password" size="40" required>
                {% for message in flash.getFieldValidationErrors('old_password') %}
                    <span class="help-block">{{ message }}</span>
                {% endfor %}
            </div>
        {% endif %}

        {% if rules is defined and rules|length > 0 %}
            <div class="form-group">
                <label>{{ trans('Password rules') }}</label>
                <div>
                    {% if rules|length == 1 %}
                        {{ trans('A password %s.')|format(rules[0]) }}
                    {% else %}
                        <div>{{ trans('A password:') }}</div>
                        <ul>
                            {% for rule in rules %}
                                <li>{{ rule ~ (loop.last ? '.' : ';') }}</li>
                            {% endfor %}
                        </ul>
                    {% endif %}
                </div>
            </div>
        {% endif %}

        <div class="form-group {{ flash.hasFieldValidationErrors('new_password') ? 'has-error' }}">
            <label class="control-label" for="new_password">{{ trans('New password') }}</label>
            <input type="password" class="form-control" name="new_password" id="new_password" size="40" required>
            {% for message in flash.getFieldValidationErrors('new_password') %}
                <span class="help-block">{{ message }}</span>
            {% endfor %}
        </div>

        <div class="form-group {{ flash.hasFieldValidationErrors('repeat_password') ? 'has-error' }}">
            <label class="control-label" for="repeat_password">{{ trans('Repeat password') }}</label>
            <input type="password" class="form-control" name="repeat_password" id="repeat_password" size="40" required>
            {% for message in flash.getFieldValidationErrors('repeat_password') %}
                <span class="help-block">{{ message }}</span>
            {% endfor %}
        </div>

        <button type="submit" class="btn btn-primary">{{ trans('Save') }}</button>
    </form>
{% endblock %}
